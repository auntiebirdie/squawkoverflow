    </div>
  </main>

  <div id="sidebar" class="bg-light">
    <div class="d-flex flex-column py-5 ps-3 ps-sm-0">
      <% if (locals.sidebar) { %>
        <%- include(`./sidebar/${sidebar}.ejs`) %>
      <% } %>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.bundle.min.js" integrity="sha512-qOBWNAMfkz+vXXgbh0Wz7qYSLZp6c14R0bZeVX2TdQxWpuKr6yHjBIM69fcF8Ve4GUX6B6AKRQJqiiAmwvmUmQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script type="text/javascript">
    $(document).ready( function () {
      lazyLoadInstance.update();

      $('.mobile-nav-toggle').on('click', function () {
        $('body').toggleClass('mobile-nav-active');
      });

      $('.mobile-sidebar-toggle').on('click', function () {
        $('body').toggleClass('mobile-sidebar-active');
      });

     <% if (locals.loggedInUser) { %>
      $('#main').on('click', '.wishlist-heart', function (event) {
        var button = event.target;
          if (!button.style.opacity) { 
            var action = button.getAttribute('data-action');
            button.style.opacity = .5;
            button.innerHTML = '‚è≥';
            $.ajax({
              url: '/api/wishlist',
              data: JSON.stringify({
                speciesCode: button.getAttribute('data-id')
              }),
              method: action == 'add' ? 'POST' : 'DELETE',
              dataType: 'json',
              contentType: 'application/json',
              success: function(data) {
                button.style.opacity = null;
                if (action == 'add') {
                  button.innerHTML = '‚ù§Ô∏è';
                  button.setAttribute('data-action', 'remove');
                }
                else {
                  button.innerHTML = 'ü§ç';
                  button.setAttribute('data-action', 'add');
                }
              }
            });
          }
      });
    <% } %>
    });
  </script>

</body>

</html>
